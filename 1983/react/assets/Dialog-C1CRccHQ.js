import{r as e,_ as Q,$ as I,l as K,x as ee,q as te,B as X,c as B,p as L,m as re,I as ne,d as H,k as se,h as N,g as ie,Z as oe,a0 as A,v as ae,P as le}from"./index-DcTlL2oN.js";import{u as ce}from"./useEventListener-Ch8xwRM1.js";import{a as ue}from"./focusable-DQv_vybo.js";class Z{}const de=()=>e.useMemo(()=>new Z,[]),fe=(n,t)=>{const r=e.useCallback(()=>n instanceof Z?(Object.assign(n,t),()=>{for(const u in t)delete n[u]}):()=>{},[n,t]);return Q(r,()=>n,()=>n)},me=n=>e.createElement("div",{style:{position:"absolute",inset:-6,display:"grid",pointerEvents:"none"}},e.createElement(ge,null),e.createElement(pe,{...n})),pe=n=>{const{elementRef:t,containerRef:r,onResizeStart:u,onResizeEnd:m}=n,p=e.useRef(!1),i=o=>{if(!t.current||o.button!==0)return;const l=o.clientX,S=o.clientY,[y,D]=I(t.current),{width:g,height:d}=t.current.getBoundingClientRect();let h=`${g}px`,b=`${d}px`,a=y,f=D,w=parseFloat(getComputedStyle(t.current).minWidth);Number.isNaN(w)&&(w=380);const E=parseFloat(getComputedStyle(t.current).minHeight),v=o.currentTarget.dataset.iuiResizer,c=t.current.ownerDocument||document,P=c.body.style.userSelect;c.body.style.userSelect="none";const T=C=>{var O;if(!t.current)return;p.current||(p.current=!0,u==null||u());const z=(O=r==null?void 0:r.current)==null?void 0:O.getBoundingClientRect(),F=K(C.clientX,(z==null?void 0:z.left)??0,(z==null?void 0:z.right)??c.documentElement.clientWidth??0),Y=K(C.clientY,(z==null?void 0:z.top)??0,(z==null?void 0:z.bottom)??c.documentElement.clientHeight??0),k=l-F,$=S-Y;switch(v){case"top-left":{const s=d+$;s>=E&&(b=t.current.style.height=`${s}px`,f=D-$);const x=g+k;x>=w&&(h=t.current.style.width=`${x}px`,a=y-k),t.current.style.transform=`translate(${a}px, ${f}px)`;break}case"top":{const s=d+$;if(s<E)break;b=t.current.style.height=`${s}px`,f=D-$,t.current.style.transform=`translate(${a}px, ${f}px)`;break}case"top-right":{const s=d+$;s>=E&&(b=t.current.style.height=`${s}px`,f=D-$),h=t.current.style.width=`${g-k}px`,t.current.style.transform=`translate(${a}px, ${f}px)`;break}case"right":{h=t.current.style.width=`${g-k}px`,b=t.current.style.height=`${d}px`,t.current.style.transform=`translate(${a}px, ${f}px)`;break}case"bottom-right":{h=t.current.style.width=`${g-k}px`,b=t.current.style.height=`${d-$}px`,t.current.style.transform=`translate(${a}px, ${f}px)`;break}case"bottom":{b=t.current.style.height=`${d-$}px`,t.current.style.transform=`translate(${a}px, ${f}px)`;break}case"bottom-left":{const s=g+k;s>=w&&(h=t.current.style.width=`${s}px`,a=y-k),b=t.current.style.height=`${d-$}px`,t.current.style.transform=`translate(${a}px, ${f}px)`;break}case"left":{const s=g+k;if(s<w)break;h=t.current.style.width=`${s}px`,b=t.current.style.height=`${d}px`,a=y-k,t.current.style.transform=`translate(${a}px, ${f}px)`;break}}};c.addEventListener("pointermove",T),c.addEventListener("pointerup",()=>{c.removeEventListener("pointermove",T),t.current&&(c.body.style.userSelect=P,p.current=!1,m==null||m({width:h,height:b,transform:`translate(${a}px, ${f}px)`}))},{once:!0})};return e.createElement(e.Fragment,null,e.createElement("div",{"data-iui-resizer":"top-left",onPointerDown:i,style:{cursor:"nw-resize"}}),e.createElement("div",{"data-iui-resizer":"top",onPointerDown:i,style:{cursor:"n-resize"}}),e.createElement("div",{"data-iui-resizer":"top-right",onPointerDown:i,style:{cursor:"ne-resize"}}),e.createElement("div",{"data-iui-resizer":"right",onPointerDown:i,style:{cursor:"e-resize"}}),e.createElement("div",{"data-iui-resizer":"bottom-right",onPointerDown:i,style:{cursor:"se-resize"}}),e.createElement("div",{"data-iui-resizer":"bottom",onPointerDown:i,style:{cursor:"s-resize"}}),e.createElement("div",{"data-iui-resizer":"bottom-left",onPointerDown:i,style:{cursor:"sw-resize"}}),e.createElement("div",{"data-iui-resizer":"left",onPointerDown:i,style:{cursor:"w-resize"}}))},ge=e.memo(()=>e.createElement("style",null,he)),he=`
[data-iui-resizer] {
  pointer-events: auto;
  grid-area: 1 / 1 / -1 / -1;
  width: 12px;
  height: 12px;
  z-index: 1;
}
[data-iui-resizer='top'],
[data-iui-resizer='bottom'] {
  height: 8px;
  width: auto;
  z-index: 0;
}
[data-iui-resizer='left'],
[data-iui-resizer='right'] {
  height: auto;
  width: 8px;
  z-index: 0;
}
[data-iui-resizer^='top'] {
  align-self: start;
}
[data-iui-resizer^='bottom'] {
  align-self: end;
}
[data-iui-resizer$='left'] {
  justify-self: start;
}
[data-iui-resizer$='right'] {
  justify-self: end;
}`,be=n=>{const{children:t}=n,r=e.useRef(),u=()=>{const i=ue(r.current),o=i[0],l=i[(i.length||1)-1];return[o,l]},m=i=>{const[o,l]=u();i.relatedTarget===o?l==null||l.focus():o==null||o.focus()},p=i=>{const[o,l]=u();i.relatedTarget===l?o==null||o.focus():l==null||l.focus()};return e.createElement(e.Fragment,null,e.createElement("div",{tabIndex:0,onFocus:m,"aria-hidden":!0}),e.cloneElement(t,{ref:ee(t.ref,r)}),e.createElement("div",{tabIndex:0,onFocus:p,"aria-hidden":!0}))},ye=n=>e.createElement(te,{...n},e.createElement("path",{d:"m14 0-6 6-6-6-2 2 6 6-6 6 2 2 6-6 6 6 2-2-6-6 6-6"})),xe=e.forwardRef((n,t)=>{const{isVisible:r=!0,className:u,...m}=n;return e.createElement(X,{className:B("iui-backdrop",{"iui-backdrop-visible":r},u),ref:t,...m})}),_=e.createContext(void 0),W=()=>e.useContext(_)||{},U=L.div("iui-dialog-title"),G=e.createContext(void 0),we=()=>({...e.useContext(G)}),Ee=Object.assign(e.forwardRef((n,t)=>{const r=W(),{children:u,titleText:m,isDismissible:p=r.isDismissible,onClose:i=r.onClose,isDraggable:o=r.isDraggable,className:l,onPointerDown:S,...y}=n,{onPointerDown:D}=we();return e.createElement(X,{className:B("iui-dialog-title-bar",l,{"iui-dialog-title-bar-filled":o}),ref:t,onPointerDown:re(S,D),...y},u||e.createElement(e.Fragment,null,e.createElement(U,null,m),p&&e.createElement(ne,{size:"small",styleType:"borderless",onClick:g=>{var d;(d=r.setIsOpen)==null||d.call(r,!1),i==null||i(g)},"aria-label":"Close","data-iui-shift":"right"},e.createElement(ye,null))))}),{Title:U}),De=L.div("iui-dialog-content"),ze=e.forwardRef((n,t)=>{const r=W(),{isVisible:u=r.isOpen,isDismissible:m=r.isDismissible,onClose:p=r.onClose,closeOnExternalClick:i=r.closeOnExternalClick,relativeTo:o=r.relativeTo,onMouseDown:l,className:S,style:y,...D}=n,g=e.useRef(null),d=H(g,t),h=b=>{var a;b.persist(),b.target===g.current&&(m&&i&&((a=r.setIsOpen)==null||a.call(r,!1),p==null||p(b)),l==null||l(b))};return e.createElement(xe,{isVisible:u,className:B({"iui-backdrop-fixed":o==="viewport"},S),ref:d,onMouseDown:h,style:{pointerEvents:"auto",...y},...D})}),ve=L.div("iui-dialog-button-bar"),q=n=>{var r,u,m;const t=(r=n==null?void 0:n.current)==null?void 0:r.getBoundingClientRect();return{top:(t==null?void 0:t.top)??0,right:(t==null?void 0:t.right)??((u=N())==null?void 0:u.innerWidth)??0,bottom:(t==null?void 0:t.bottom)??((m=N())==null?void 0:m.innerHeight)??0,left:(t==null?void 0:t.left)??0}},$e=(n,t,r=!0)=>{const u=e.useRef(0),m=e.useRef(0),p=e.useRef(),i=e.useRef(),o=e.useRef(q(t)),l=e.useCallback(()=>{var P;if(!n.current||!r)return;const{top:a,right:f,bottom:w,left:E}=(P=n.current)==null?void 0:P.getBoundingClientRect();let[v,c]=I(n.current);o.current=q(t),w>o.current.bottom&&(c-=w-o.current.bottom),a<o.current.top&&(c+=o.current.top-a),f>o.current.right&&(v-=f-o.current.right),E<o.current.left&&(v+=o.current.left-E),p.current=v,i.current=c,n.current.style.transform=`translate(${v}px, ${c}px)`},[t,n,r]),[S,y]=se(l);S(t==null?void 0:t.current),e.useEffect(()=>()=>{y==null||y.disconnect()},[y]),ce("resize",()=>{l(),p.current!=null&&i.current!=null&&g(`translate(${p.current}px, ${i.current}px)`)},N());const[D,g]=e.useState(""),d=e.useRef(a=>{if(!n.current)return;const f=a.clientX-u.current,w=a.clientY-m.current;n.current.style.transform=`translate(${f}px, ${w}px)`,l()}),h=e.useRef("");return{onPointerDown:e.useCallback(a=>{if(!n.current||a.button!==0||!r)return;const[f,w]=I(n.current);u.current=a.clientX-f,m.current=a.clientY-w,h.current=n.current.style.userSelect,n.current.style.userSelect="none";const E=n.current.ownerDocument||document;E.addEventListener("pointermove",d.current),E.addEventListener("pointerup",()=>{g(`translate(${p.current}px, ${i.current}px)`),E.removeEventListener("pointermove",d.current),n.current&&(n.current.style.userSelect=h.current)},{once:!0})},[n,r]),transform:D}},Se=e.forwardRef((n,t)=>{const r=W(),{className:u,children:m,styleType:p="default",isOpen:i=r.isOpen,isDismissible:o=r.isDismissible,onClose:l=r.onClose,closeOnEsc:S=r.closeOnEsc,trapFocus:y=r.trapFocus,setFocus:D=r.setFocus,preventDocumentScroll:g=r.preventDocumentScroll,onKeyDown:d,isDraggable:h=r.isDraggable,isResizable:b=r.isResizable,style:a,placement:f=r.placement,...w}=n,[E,v]=e.useState(),c=e.useRef(null),P=e.useRef(!1),T=e.useRef(),C=e.useRef("");e.useEffect(()=>{i&&(C.current=document.body.style.overflow)},[i]),e.useEffect(()=>{var x;const s=(x=c.current)==null?void 0:x.ownerDocument;if(!(!s||!g||C.current==="hidden"))return i?s.body.style.overflow="hidden":s.body.style.overflow=C.current,()=>{s.body.style.overflow=C.current}},[i,g]);const z=s=>{var x;s.altKey||(s.persist(),o&&S&&s.key==="Escape"&&((x=r.setIsOpen)==null||x.call(r,!1),l==null||l(s)),d==null||d(s))},{onPointerDown:F,transform:Y}=$e(c,r.dialogRootRef,h),k=e.useCallback(s=>{h&&F(s)},[h,F]);ie(()=>{var M;if(!h||!i)return;const s=(M=c.current)==null?void 0:M.getBoundingClientRect(),[x,R]=I(c.current);v(J=>{var j,V;return{...J,inlineSize:s==null?void 0:s.width,blockSize:s==null?void 0:s.height,insetInlineStart:(j=c.current)==null?void 0:j.offsetLeft,insetBlockStart:(V=c.current)==null?void 0:V.offsetTop,transform:`translate(${x}px,${R}px)`}})},[h,i]);const $=e.useCallback(s=>{v(x=>({...x,...s}))},[]),O=e.createElement(X,{className:B("iui-dialog",{"iui-dialog-default":p==="default","iui-dialog-full-page":p==="fullPage","iui-dialog-visible":i,"iui-dialog-draggable":h},u),role:"dialog",ref:H(c,t),onKeyDown:z,tabIndex:-1,"data-iui-placement":f,style:{transform:Y,...E,...a},...w},e.createElement(oe,null,e.createElement("slot",null),b&&e.createElement(me,{elementRef:c,containerRef:r.dialogRootRef,onResizeStart:()=>{P.current||(P.current=!0,$({maxInlineSize:"100%"}))},onResizeEnd:$})),m);return e.createElement(A,{in:i,appear:!0,timeout:{exit:600},onEntered:()=>{var s,x;T.current=(s=c.current)==null?void 0:s.ownerDocument.activeElement,D&&((x=c.current)==null||x.focus({preventScroll:!0}))},onExit:()=>{var s,x,R;(x=c.current)!=null&&x.contains((s=c.current)==null?void 0:s.ownerDocument.activeElement)&&((R=T.current)==null||R.focus())},unmountOnExit:!0,nodeRef:c},e.createElement(G.Provider,{value:{onPointerDown:k}},y&&e.createElement(be,null,O),!y&&O))}),ke=e.forwardRef((n,t)=>{const{trapFocus:r=!1,setFocus:u=!1,preventDocumentScroll:m=!1,isOpen:p,isDismissible:i=!0,closeOnEsc:o=!0,closeOnExternalClick:l=!1,onClose:S,isDraggable:y=!1,isResizable:D=!1,relativeTo:g="viewport",placement:d,className:h,portal:b=!1,instance:a,...f}=n,[w,E]=ae(!1,p);fe(a,e.useMemo(()=>({show:()=>E(!0),close:()=>E(!1)}),[E]));const v=e.useRef(null);return e.createElement(A,{in:w,timeout:{exit:600},mountOnEnter:!0,unmountOnExit:!0},e.createElement(_.Provider,{value:{isOpen:w,setIsOpen:E,onClose:S,closeOnEsc:o,closeOnExternalClick:l,isDismissible:i,preventDocumentScroll:m,trapFocus:r,setFocus:u,isDraggable:y,isResizable:D,relativeTo:g,dialogRootRef:v,placement:d}},e.createElement(le,{portal:b},e.createElement(X,{className:B("iui-dialog-wrapper",h),"data-iui-relative":g==="container",ref:H(v,t),...f}))))}),Oe=Object.assign(ke,{Backdrop:ze,Main:Se,TitleBar:Ee,Content:De,ButtonBar:ve,useInstance:de});export{Oe as D,De as a,ve as b};
